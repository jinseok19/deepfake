# 📊 딥페이크 탐지 모델 - 전체 실험 요약

> **대회**: 딥페이크 범죄 대응을 위한 AI 탐지 모델 경진대회  
> **기간**: 2024.10.23 ~ 2024.11.20  
> **평가지표**: Macro F1-score (Fake=양성)  
> **Competition Key**: `c346c572-9253-418e-8a95-52cf0afa1611` (CUDA 11.8)

---

## 🏆 최고 성적

| 항목 | 값 |
|------|-----|
| **최고 F1 Score** | **0.5489** |
| **실험 번호** | BASELINE |
| **베이스라인** | - |
| **순위** | - |

---

## 📈 실험 진행 현황

| 번호 | 일시 | 모델 | F1 Score | 베이스라인 대비 | 순위 | 상태 | 상세 |
|------|------|------|----------|----------------|------|------|------|
| **BASELINE** | - | ViT-base | **0.5489** | - | - | 🏆 최고 | - |
| EXP-001 | 10.24 20:20 | ViT-base | 0.5354 | **-2.46%** ❌ | 7위 | ❌ 실패 | [📄](EXP-001.md) |
| EXP-002 | 10.29 | ViT-base | **0.5506** | **+0.31%** ⚠️ | - | ⚠️ 미미 | [📄](EXP-002.md) |

---

## 📊 성능 추이 그래프

```
F1 Score
0.60 |                                      🎯 목표 (0.60)
     |
0.58 |
     |
0.56 |                                  
     |
0.54 |  ▬ BASELINE (0.5489) 🏆
     |              
0.53 |              ■ EXP-001 (0.5354) ❌ 하락!
     |
0.52 |
     |
0.50 |
     +------------------------------------------
        BASELINE    EXP-001    EXP-002    EXP-003
```

---

## 🔬 주요 발견 사항

### ❌ 실패한 기법 (단계별)

#### 1️⃣ 전처리 (Pre-processing)
- **중앙 크롭** (얼굴 미검출 시) - 기여도 **-1~2%** ❌
  - 문제: 얼굴 없는 이미지를 억지로 예측 → 노이즈
  - 교훈: **얼굴 없음 = Real** 휴리스틱이 데이터에 맞음

#### 2️⃣ 모델링 (Modeling)
- 변경 없음

#### 3️⃣ 후처리 (Post-processing)
- **Mean + Max 조합** (0.6/0.4) - 기여도 **-0.5~1%** ❌
  - 문제: Max가 노이즈 증폭
  - 교훈: **Mean only**가 더 안정적
- **프레임 필터링** (검출 성공만) - 기여도 **-0.5~1%** ❌
  - 문제: 정보 손실
  - 교훈: 모든 프레임 사용이 나음

### ⏳ 진행 중인 실험
- **EXP-002**: 프레임 수 증가 (30 → 40) - 제출 준비 완료

### ❌ 시도하지 않은 기법

#### 전처리
- [⏳] 프레임 수 증가 (30 → 40+) - **EXP-002 진행 중**
- [ ] TTA (좌우 반전, 회전)
- [ ] 동적 프레임 샘플링
- [ ] margin 최적화

#### 모델링
- [ ] 모델 앙상블
- [ ] 모델 파인튜닝
- [ ] 다른 아키텍처 시도

#### 후처리
- [ ] Mean/Max 비율 Grid Search
- [ ] Median 사용
- [ ] 확률 임계값 조정

### 🤔 확인이 필요한 것
- **전처리**: margin 최적값 (1.3? 1.4? 1.5?)
- **전처리**: 프레임 수와 성능 관계
- **후처리**: Mean/Max 비율 최적값

---

## 🎯 현재 실험 (EXP-002)

### 🔄 실험 중: 프레임 수 증가 ⏳
- **목표**: 검증된 개선 방법으로 성능 향상
- **전략**: 베이스라인 기반 + NUM_FRAMES만 증가

#### 변경 사항

**✅ 단일 변경**
```python
# 베이스라인 기반
NUM_FRAMES: 30 → 40

# 유지
- 얼굴 없으면 레이블 0
- Mean only (MEAN_WEIGHT=1.0, MAX_WEIGHT=0.0)
- 모든 프레임 사용 (필터링 없음)
- margin = 1.3
```
예상 효과: +2~4% (F1 0.57~0.59)

### 향후 실험 아이디어 (단계별)

#### 전처리
1. **프레임 수 최적화**: 30, 35, 40, 45 비교
2. **TTA 적용**: 좌우 반전, 회전
3. **동적 샘플링**: 장면 전환 감지

#### 모델링
1. **앙상블**: 여러 번 추론 후 평균
2. **다른 모델**: ResNet, EfficientNet 시도

#### 후처리
1. **가중치 Grid Search**: Mean/Max 비율 최적화
2. **Median 추가**: Mean, Max, Median 조합
3. **임계값 조정**: 확률 기반 필터링

---

## 📋 파라미터 변화 추이

### 전처리 파라미터
| 파라미터 | BASELINE | EXP-001 | EXP-002 (계획) |
|----------|----------|---------|----------------|
| NUM_FRAMES | 30 | 30 | **40** |
| margin | 1.3 | 1.3 | **1.4** |
| 얼굴 미검출 처리 | 레이블 0 | 중앙 크롭 | 중앙 크롭 |
| 데이터 증강 | 없음 | 없음 | 없음 |

### 모델링 파라미터
| 파라미터 | BASELINE | EXP-001 | EXP-002 (계획) |
|----------|----------|---------|----------------|
| 모델 | ViT-base | ViT-base | ViT-base |
| BATCH_SIZE | 전체 | 16 | 16 |

### 후처리 파라미터
| 파라미터 | BASELINE | EXP-001 | EXP-002 (계획) |
|----------|----------|---------|----------------|
| MEAN_WEIGHT | 1.0 | 0.6 | **0.7** |
| MAX_WEIGHT | 0.0 | 0.4 | **0.3** |
| 프레임 필터링 | 없음 | 검출 성공만 | 검출 성공만 |

---

## 💡 학습한 교훈

1. **베이스라인 정확히 파악하기**
   - 처음에 0.50으로 착각 → 실제 0.5489
   - 정확한 베이스라인 파악이 실험 분석의 시작!

2. **"개선"이 항상 좋은 것은 아니다**
   - EXP-001: 모든 "개선" 시도가 역효과 (-2.46%)
   - **검증 없는 가설은 위험**하다

3. **단순한 전략이 더 효과적일 수 있다**
   - 얼굴 없음 = Real (단순하지만 효과적)
   - Mean only (Max보다 안정적)
   - 모든 프레임 사용 (필터링보다 나음)

4. **체계적인 실험 관리의 중요성**
   - 단계별 기여도 추정
   - 실패로부터 배우기
   - 베이스라인으로 돌아갈 용기

---

## 📞 참고 자료

- 대회 페이지: https://aifactory.space/task/9197
- 리더보드: https://aifactory.space/task/9197/leaderboard
- Q&A: https://aifactory.space/task/9197/qna

---

**마지막 업데이트**: 2025.10.29  
**총 실험 횟수**: 1회 (EXP-002 제출 준비 중)  
**남은 일일 제출**: 3회

